<h1>Confirm e-mail address</h1>

<div *ngIf="userDetails$ | async as userDetails" class="mb-3">
    <p>
        Please confirm that
        <a href="mailto:{{userDetails.email}}">{{userDetails.email}}</a>
        is an e-mail address for user {{userDetails.username}}.
    </p>

    <button class="btn btn-primary" (click)="confirm()">
        Confirm
        <div *ngIf="loading$ | async" class="spinner-border spinner-border-sm" role="status">
            <span class="visually-hidden">Verifying email...</span>
        </div>
    </button>
</div>

<div *ngIf="error$ | async as error" class="alert alert-danger" role="alert">
    <h2 class="h6 alert-heading">Error</h2>
    {{error.error}}
</div>

<div *ngIf="success$ | async" class="alert alert-success" role="alert">
    <h2 class="h6 alert-heading">E-mail confirmed</h2>
    Your email address has been verified!
    <a *ngIf="directToLogin$ | async; else homeLink" [routerLink]="['/login']" class="alert-link">
        Sign in
    </a>
    <ng-template #homeLink>
        <a [routerLink]="['/']" class="alert-link">Return to home page</a>
    </ng-template>
</div>
