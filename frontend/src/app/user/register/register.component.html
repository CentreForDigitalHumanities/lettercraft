<h2>Register</h2>

<p>Enter your details in the form below to create a new user account.</p>

<form class="needs-validation" [formGroup]="form" (ngSubmit)="submit()">
    <div>
        <label for="username" class="form-label">
            Username
        </label>
        <input
            type="text"
            id="username"
            class="form-control"
            [class.is-invalid]="form.controls.username.touched && form.controls.username.invalid"
            [formControl]="form.controls.username"
        >
        <p *ngIf="form.controls.username.hasError('required')" class="invalid-feedback">Please provide a username</p>
        <p *ngIf="form.controls.username.hasError('minlength')" class="invalid-feedback">Username must be at least 3 characters long</p>
        <p *ngIf="form.controls.username.hasError('maxlength')" class="invalid-feedback">Username must be at most 150 characters long</p>
    </div>
    <div>
        <label for="email" class="form-label">Email</label>
        <input
            type="email"
            id="email"
            class="form-control"
            [class.is-invalid]="form.controls.email.touched && form.controls.email.invalid"
            [formControl]="form.controls.email">
        <p class="invalid-feedback">Please provide a valid email</p>
    </div>
    <div>
        <label for="password1" class="form-label">Password</label>
        <input
            type="password"
            id="password1"
            class="form-control"
            [class.is-invalid]="form.controls.password1.touched && form.controls.password1.invalid"
            [formControl]="form.controls.password1">
        <p *ngIf="form.controls.password1.hasError('required')" class="invalid-feedback">Please provide a password</p>
        <p *ngIf="form.controls.password1.hasError('minlength')" class="invalid-feedback">Password must be at least 8 characters long</p>
    </div>
    <div>
        <label for="password2" class="form-label">Confirm Password</label>
        <input
            type="password"
            class="form-control"
            id="password2"
            [class.is-invalid]="form.controls.password2.touched && form.controls.password2.invalid"
            [formControl]="form.controls.password2">
        <p *ngIf="form.controls.password2.hasError('required')" class="invalid-feedback">Please provide a password</p>
        <p *ngIf="form.controls.password2.hasError('minlength')" class="invalid-feedback">Password must be at least 8 characters long</p>
    </div>
    <p class="invalid-feedback" [class.visible]="form.hasError('passwords')">Passwords do not match.</p>
    <button type="submit" class="btn btn-primary mt-3">Register</button>
</form>
