<ng-container *ngIf="data$ | async as data; else loading">
    <lc-breadcrumb [breadcrumbs]="getBreadcrumbs(data)"></lc-breadcrumb>

    <ng-container *ngIf="data.agentDescription as agent; else noAgent">
        <a
            *ngIf="agent.source.isPublic"
            class="float-end btn btn-light"
            [routerLink]="['/data/agents', agent.id]"
        >
            <lc-icon [icon]="actionIcons.view" />
            View on public interface
        </a>
        <h1 class="mb-4">
            <lc-icon [icon]="agentIcon(agent)" />
            {{ agent.name }}
            <span class="text-primary"> ({{ agent.source.name }}) </span>
        </h1>

        <p class="lead mb-4">
            <span *ngIf="agent.description; else noDescription">
                {{ agent.description }}
            </span>
            <ng-template #noDescription>
                <i>(No description)</i>
            </ng-template>
        </p>

        <lc-form-status [status$]="status$" />

        <div class="hstack">
            <lc-delete-agent
                class="ms-auto"
                [navigateOnDelete]="sourceLink(data)"
            />
        </div>

        <h2>Identification</h2>
        <lc-agent-identification-form />

        <h2>Description in source text</h2>
        <lc-agent-description-form />

        <h2>Episodes</h2>

        <lc-agent-episodes-form />

        <h2>Historical context</h2>

        <lc-agent-historical-person-form />
    </ng-container>

    <ng-template #noAgent>
        <lc-not-found entity="agent" [id]="id$ | async" />
    </ng-template>
</ng-container>

<ng-template #loading>
    <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</ng-template>
