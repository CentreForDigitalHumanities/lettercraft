<lc-breadcrumb [breadcrumbs]="breadcrumbs()" />

<h1 class="mb-4">
    <lc-icon [icon]="dataIcons.source" />
    {{ sourceTitle() }}
</h1>


<h2 class="mb-4">Episodes</h2>

<p>
    Identify <i>episodes</i> in the narrative that relate to epistolary communication.
    For each episode, fill in what happens and what agents, objects, and locations are involved.
</p>

<div class="mb-4" *ngIf="source$ | async as source">
    <div class="card mb-4"
        *ngFor="let episode of source.episodes">
        <div class="card-header">
            <div class="d-flex justify-content-between">
                <div>
                    <lc-icon [icon]="dataIcons.episode" />
                    &nbsp;
                    {{episode.name}}
                    <br>
                    <small>book 1, chapter 1</small>
                </div>
                <lc-action-button-group
                    [editLink]="['episode', episode.id]"
                    (delete)="deleteEpisode(episode.id)" />
            </div>
        </div>
        <div class="card-body">
            <p>{{episode.summary || '...'}}</p>

            <!-- <dl>
                <ng-container *ngIf="episode.agents.length">
                    <dt>Agents</dt>
                    <dd class="ms-4">
                        <span *ngFor="let agent of episode.agents; let last = last">
                            <a [routerLink]="['agent/', agent.id]" class="icon-link">
                                <i [class]="agentIcon(agent)"></i>
                                {{agent.name}}
                            </a><span *ngIf="!last">, &nbsp;</span>
                        </span>
                    </dd>
                </ng-container>

                <ng-container *ngIf="episode.locations.length">
                    <dt>Locations</dt>
                    <dd class="ms-4">
                        <span *ngFor="let location of episode.locations; let last = last">
                            <a [routerLink]="['location/', location.id]"  class="icon-link">
                                <i [class]="icons.location"></i>
                                {{location.name}}
                            </a><span *ngIf="!last">, &nbsp;</span>
                        </span>
                    </dd>
                </ng-container>

                <ng-container *ngIf="episode.objects.length">
                    <dt>Objects</dt>
                    <dd class="ms-4">
                        <span *ngFor="let object of episode.objects; let last = last">
                            <a [routerLink]="['object/', object.id]" class="icon-link">
                                <i [class]="icons.letter"></i>
                                {{object.name}}
                            </a><span *ngIf="!last">, &nbsp;</span>
                        </span>
                    </dd>
                </ng-container>
            </dl> -->
        </div>
    </div>
</div>
<div class="btn-group mb-4">
    <button class="btn btn-primary" disabled>
        <lc-icon [icon]="actionIcons.create" />
        Add a new episode
    </button>
</div>
