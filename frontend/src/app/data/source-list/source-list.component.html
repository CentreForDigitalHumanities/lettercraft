<lc-breadcrumb [breadcrumbs]="breadcrumbs" />

<h1 class="mb-4">Source texts</h1>

<p>
    The list below shows the medieval texts that have been analysed in the
    Lettercraft project. Click on a source to view more information and explore
    its epistolary events.
</p>


<ng-container *ngIf="collection$ | async as collection">
    <lc-search-bar [searchControl]="searchControl" [loading$]="collectionLoading$"
        labelText="Search sources by name, bibliographical reference or description" searchText="Searching sources" />

    <lc-paginator [pageResult]="pageResult" />

    <ul class="list-group mt-2" *ngIf="pageResult.pageData$ | async as pageData">
        <li *ngFor="let source of pageData.sources" class="list-group-item list-group-item-action">
            <div class="d-flex align-items-center">
                <a [routerLink]="[source.id]" class="mb-1 h5 stretched-link">{{ source.name }}</a>
                <small class="text-body-secondary ms-2">
                    ({source.numOfEpisodes, plural, =0 {No episodes} =1 {1 episode} other {{{ source.numOfEpisodes}}
                    episodes}})
                </small>
            </div>
            <p class="mb-1">
                <ng-container *ngIf="source.medievalTitle">
                    <em>{{ source.medievalTitle }}</em>.
                </ng-container>
            </p>
        </li>
    </ul>

    <div *ngIf="collection.length === 0" class="mt-3 text-center">
        <p class="text-muted">No sources found matching "{{ searchControl.value }}."</p>
    </div>

    <lc-paginator [pageResult]="pageResult" />

</ng-container>
