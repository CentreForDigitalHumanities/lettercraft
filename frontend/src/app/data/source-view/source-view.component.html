<ng-container *ngIf="data$ | async as data; else loading">
    <ng-container *ngIf="data.source as source; else noEpisode">
        <lc-breadcrumb [breadcrumbs]="makeBreadcrumbs(source)" />
        <a
            *ngIf="source.editable"
            class="float-end btn btn-light"
            [routerLink]="['/data-entry/sources', source.id]"
        >
            <lc-icon [icon]="actionIcons.edit" />
            Edit this source
        </a>

        <lc-object-page-header [object]="source" [icon]="dataIcons.source" />

        <lc-contributors [contributors]="source.contributors" />

        <section class="mt-4 mb-4">
            <h2 class="h3">About this source</h2>

            <div [innerHTML]="source.descriptionText"></div>

            <div class="card mb-4 mt-4 text-bg-light">
                <div class="card-body">
                    <h3 class="h5 card-title mb-4">Bibliographical information</h3>

                    <div [innerHTML]="source.reference"></div>
                </div>
            </div>
        </section>

        <h2 class="mb-4">Epistolary episodes</h2>

        <lc-episode-preview
            *ngFor="let episode of source.episodes"
            [episode]="episode"
        />
    </ng-container>

    <ng-template #noEpisode>
        <lc-not-found entity="episode" [id]="id$ | async" />
    </ng-template>
</ng-container>

<ng-template #loading>
    <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
    </div>
</ng-template>
